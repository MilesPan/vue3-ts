var W=Object.defineProperty,Y=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var U=(e,t,a)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,z=(e,t)=>{for(var a in t||(t={}))J.call(t,a)&&U(e,a,t[a]);if(O)for(var a of O(t))K.call(t,a)&&U(e,a,t[a]);return e},L=(e,t)=>Y(e,G(t));import{L as X,M as Z,N as ee,e as te}from"./element-plus.8f542e47.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import{d as H,Y as ae,h as B,o as u,c as w,a as C,E as v,U as k,e as N,R as r,b as _,O as f,P as I,a3 as R,a0 as y,F as M,u as i,v as ne,w as se,t as j,aa as oe}from"./@vue.60f1aaec.js";import{u as re,b as le}from"./index.9eccfdba.js";const ie={class:"tableComponent"},ue={class:"header"},de={class:"title"},ce={class:"handler"},pe={key:0,class:"footer"},ge=H({props:{title:{type:String,required:!1},listData:{type:Array,required:!0},listCount:{type:Number,default:0},propsList:{type:Array,required:!0},showIndexColumn:{type:Boolean,default:!1},showSelectColumn:{type:Boolean,default:!1},page:{type:Object,default:()=>({currentPage:1,pageSzie:10})},childrenProps:{type:Object,default:()=>({})},showFooter:{type:Boolean,default:!0}},emits:["selectionChange","update:page"],setup(e,{emit:t}){const a=e,o=s=>{t("selectionChange",s)},p=ae(a.page),x=B(!1),D=B(!1),E=B(!1),S=s=>{t("update:page",L(z({},a.page),{pageSize:s}))},g=s=>{t("update:page",L(z({},a.page),{currentPage:s}))};return(s,m)=>{const h=X,A=Z,F=ee;return u(),w("div",ie,[C("div",ue,[v(s.$slots,"header",{},()=>[C("div",de,k(e.title),1),C("div",ce,[v(s.$slots,"headerHandler",{},void 0,!0)])],!0)]),N(A,M(e.childrenProps,{data:e.listData,border:"",style:{width:"100%"},onSelectionChange:o}),{default:r(()=>[e.showSelectColumn?(u(),_(h,{key:0,type:"selection",align:"center","min-width":"60"})):f("",!0),e.showIndexColumn?(u(),_(h,{key:1,type:"index",label:"\u5E8F\u53F7",align:"center","min-width":"100"})):f("",!0),(u(!0),w(I,null,R(e.propsList,l=>(u(),_(h,{key:l.prop,class:"table-column","show-overflow-tooltip":!0,prop:l.prop,label:l.label,"min-width":l.minWidth,align:"center"},{default:r(P=>[v(s.$slots,l.slotName,{row:P.row},()=>[y(k(P.row[l.prop]),1)],!0)]),_:2},1032,["prop","label","min-width"]))),128))]),_:3},16,["data"]),e.showFooter?(u(),w("div",pe,[v(s.$slots,"footer",{},()=>[N(F,{currentPage:i(p).currentPage,"onUpdate:currentPage":m[0]||(m[0]=l=>i(p).currentPage=l),"page-size":i(p).pageSize,"onUpdate:page-size":m[1]||(m[1]=l=>i(p).pageSize=l),"page-sizes":[10,20,30],small:x.value,disabled:E.value,background:D.value,layout:"total, sizes, prev, pager, next, jumper",total:e.listCount,onSizeChange:S,onCurrentChange:g},null,8,["currentPage","page-size","small","disabled","background","total"])],!0)])):f("",!0)])}}});var me=V(ge,[["__scopeId","data-v-0b0fbd24"]]);function $(e,t){const a=re().permissions,o=`system${e}:${t}`;return!!a.find(p=>p.indexOf(o))}const fe={class:"pageContent"},he=y("\u65B0\u5EFA"),Ce=y("\u5237\u65B0"),_e={class:"handle-btns"},ye=y("\u7F16\u8F91 "),be=y("\u5220\u9664"),ve=H({props:{contentTableConfig:{type:Object,required:!0},pageName:{type:String,required:!0}},emits:["newBtnClick","editBtnClick"],setup(e,{expose:t,emit:a}){var T;const o=e,p=$(o.pageName,"create"),x=$(o.pageName,"update"),D=$(o.pageName,"query"),E=$(o.pageName,"delete"),S=(T=ne())==null?void 0:T.appContext.config.globalProperties.$filters,g=B({currentPage:1,pageSize:10}),s=le(),m=(d={})=>{!D||s.getPageListAction({pageName:o.pageName,queryInfo:z({offset:(g.value.currentPage-1)*g.value.pageSize,size:g.value.pageSize},d)})};se(()=>{m()});const h=j(()=>s.pageListData(o.pageName)),A=j(()=>s.pageListCount(o.pageName)||h.value.length),F=o.contentTableConfig.propsList.filter(d=>{switch(d.slotName){case"status":return!1;case"createAt":return!1;case"handler":return!1;case"updateAt":return!1;default:return!0}}),l=d=>{s.deletePageData({pageName:o.pageName,id:d.id})},P=()=>{a("newBtnClick")},Q=d=>{a("editBtnClick",d)};return t({getPageData:m}),(d,q)=>{const b=te;return u(),w("div",fe,[N(me,M(e.contentTableConfig,{listCount:i(A),listData:i(h),page:g.value,"onUpdate:page":q[0]||(q[0]=n=>g.value=n)}),oe({headerHandler:r(()=>[i(p)?(u(),_(b,{key:0,type:"primary",onClick:P},{default:r(()=>[he]),_:1})):f("",!0),N(b,{icon:"Refresh",type:"primary"},{default:r(()=>[Ce]),_:1})]),status:r(n=>[N(b,{plain:"",size:"small",type:n.row.enable||n.row.status?"primary":"danger"},{default:r(()=>[y(k(n.row.enable||n.row.status?"\u542F\u7528":"\u7981\u7528"),1)]),_:2},1032,["type"])]),createAt:r(n=>{var c;return[C("strong",null,k((c=i(S))==null?void 0:c.formatTime(n.row.updateAt)),1)]}),updateAt:r(n=>{var c;return[C("strong",null,k((c=i(S))==null?void 0:c.formatTime(n.row.updateAt)),1)]}),handler:r(n=>[C("div",_e,[i(x)?(u(),_(b,{key:0,size:"small",type:"text",icon:"Edit",onClick:c=>Q(n.row)},{default:r(()=>[ye]),_:2},1032,["onClick"])):f("",!0),i(E)?(u(),_(b,{key:1,size:"small",type:"text",icon:"Delete",onClick:c=>l(n.row)},{default:r(()=>[be]),_:2},1032,["onClick"])):f("",!0)])]),_:2},[R(i(F),n=>({name:n.slotName,fn:r(c=>[n.slotName?(u(),w(I,{key:0},[],64)):f("",!0),v(d.$slots,n.slotName,{row:c.row},void 0,!0)])}))]),1040,["listCount","listData","page"])])}}});var ze=V(ve,[["__scopeId","data-v-4d9a86b0"]]);export{ze as p};
